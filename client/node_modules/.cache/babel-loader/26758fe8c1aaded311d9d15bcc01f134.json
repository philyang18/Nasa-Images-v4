{"ast":null,"code":"import _regeneratorRuntime from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/phillipyang/Desktop/Nasa-Images-v4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{NavLink}from'react-router-dom';import DocumentTitle from\"react-document-title\";import{BACK_SERVER_URL}from'./NasaAPIs';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.toggleUI=function(){_this.setState({showUI:true});};_this.handleToggle=function(e){e.preventDefault();_this.setState({showLogin:!_this.state.showLogin,password:\"\",passwordAgain:\"\",email:\"\",loginError:false,emailErrorMessage:\"\",passwordErrorMessage:\"\"});};_this.saveEmail=function(event){_this.setState({email:event.target.value,emailErrorMessage:\"\",loginError:false});};_this.savePassword=function(event){_this.setState({password:event.target.value,passwordErrorMessage:\"\",loginError:false});};_this.savePasswordAgain=function(event){_this.setState({passwordAgain:event.target.value,passwordErrorMessage:\"\"});};_this.handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();account={_id:_this.state.email.toLowerCase(),password:_this.state.password};_context.next=4;return axios.post(\"\".concat(BACK_SERVER_URL,\"/account/login\"),account).then(function(response){if(response.status===200){_this.props.onLogin(_this.state.email);_this.setState({isLoggedIn:true,showUI:false});console.log(response);}else{_this.setState({loginError:true});}}).catch(function(error){_this.setState({loginError:true});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleCreate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var account;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(_this.state.email.length<5)){_context2.next=5;break;}_this.setState({emailErrorMessage:\"Email is invalid\"});_context2.next=30;break;case 5:if(!(_this.state.password!==_this.state.passwordAgain)){_context2.next=9;break;}_this.setState({passwordErrorMessage:\"Passwords must match\"});_context2.next=30;break;case 9:if(!(_this.state.password.length<8)){_context2.next=13;break;}_this.setState({passwordErrorMessage:\"Password must have at least 8 characters\"});_context2.next=30;break;case 13:if(/^(?=.*[a-z])/.test(_this.state.password)){_context2.next=17;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 lowercase character\"});_context2.next=30;break;case 17:if(/^(?=.*[A-Z])/.test(_this.state.password)){_context2.next=21;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 uppercase character\"});_context2.next=30;break;case 21:if(/^(?=.*[0-9])/.test(_this.state.password)){_context2.next=25;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 numerical character\"});_context2.next=30;break;case 25:_this.setState({emailErrorMessage:\"\"});_this.setState({passwordErrorMessage:\"\"});account={_id:_this.state.email.toLowerCase(),password:_this.state.password,favorites:[]};_context2.next=30;return axios.post(\"\".concat(BACK_SERVER_URL,\"/account/signup\"),account).then(function(response){_this.props.onLogin(_this.state.email);_this.setState({isLoggedIn:true,showUI:false});// this.props.history.push('/apod');\n}).catch(function(error){_this.setState({emailErrorMessage:\"Email is already in use\"});});case 30:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={showLogin:true,password:\"\",passwordAgain:\"\",email:\"\",passwordErrorMessage:\"\",emailErrorMessage:\"\",loginError:false,showUI:false,isLoggedIn:props.location.state===undefined?false:true};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(DocumentTitle,{title:\"Nasa Images\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-page\"},this.state.showUI?/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-container\",className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-content\"},/*#__PURE__*/React.createElement(\"h1\",null,\"NASA Images\"),this.state.showLogin?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleLogin},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"johndoe@gmail.com\",onChange:this.saveEmail,value:this.state.email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePassword,value:this.state.password}),this.state.loginError?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},\"Invalid email or password\"):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\"},\"Login\")),/*#__PURE__*/React.createElement(\"div\",{id:\"login-links\",className:\"row\"},/*#__PURE__*/React.createElement(\"p\",{className:\"col-6\"},\"Forgot Password?\"),/*#__PURE__*/React.createElement(\"p\",{className:\"col-6\",onClick:this.handleToggle},\"Sign Up\"))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Create Account\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleCreate},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"johndoe@gmail.com\",onChange:this.saveEmail,value:this.state.email}),this.state.emailErrorMessage.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},this.state.emailErrorMessage):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePassword,value:this.state.password})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Re-enter Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePasswordAgain,value:this.state.passwordAgain}),this.state.passwordErrorMessage.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},this.state.passwordErrorMessage):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",type:\"submit\"},\"Create\")),/*#__PURE__*/React.createElement(\"div\",{id:\"login-links\",className:\"row\"},/*#__PURE__*/React.createElement(\"p\",{onClick:this.handleToggle,className:\"col-12\"},\"Already have an account? Log in\"))))))):/*#__PURE__*/React.createElement(\"div\",{id:\"home-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h1\",null,\"NASA IMAGES\"),this.state.isLoggedIn?/*#__PURE__*/React.createElement(\"div\",{id:\"home-link-container\",className:\"row\"},/*#__PURE__*/React.createElement(NavLink,{className:\"col-6\",to:{pathname:'/apod',state:{email:this.state.email}}},/*#__PURE__*/React.createElement(\"h2\",null,\"APOD\")),/*#__PURE__*/React.createElement(NavLink,{className:\"col-6\",to:{pathname:'/mars',state:{email:this.state.email}}},/*#__PURE__*/React.createElement(\"h2\",null,\"Mars\"))):/*#__PURE__*/React.createElement(\"h2\",{onClick:this.toggleUI},\"Login / Signup\")))))));}}]);return Login;}(React.Component);export{Login as default};","map":{"version":3,"sources":["/Users/phillipyang/Desktop/Nasa-Images-v4/client/src/Login.js"],"names":["React","axios","NavLink","DocumentTitle","BACK_SERVER_URL","Login","props","toggleUI","setState","showUI","handleToggle","e","preventDefault","showLogin","state","password","passwordAgain","email","loginError","emailErrorMessage","passwordErrorMessage","saveEmail","event","target","value","savePassword","savePasswordAgain","handleLogin","account","_id","toLowerCase","post","then","response","status","onLogin","isLoggedIn","console","log","catch","error","handleCreate","length","test","favorites","location","undefined","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\nimport DocumentTitle from \"react-document-title\";\nimport { BACK_SERVER_URL } from './NasaAPIs';\n\nexport default class Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showLogin: true,\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\",\n            passwordErrorMessage: \"\",\n            emailErrorMessage: \"\",\n            loginError: false,\n            showUI: false,\n            isLoggedIn: props.location.state === undefined ? false : true\n        };\n    }\n    toggleUI = () => {\n        this.setState({showUI: true});\n    }\n    handleToggle = e => {\n        e.preventDefault();\n        this.setState({showLogin: !this.state.showLogin, password: \"\", passwordAgain: \"\", email: \"\", loginError: false,emailErrorMessage: \"\", passwordErrorMessage: \"\" });\n    }\n    saveEmail = event => {\n        this.setState({email: event.target.value, emailErrorMessage: \"\", loginError: false});\n    }\n    savePassword = event => {\n        this.setState({password: event.target.value, passwordErrorMessage: \"\", loginError: false });\n    }\n    savePasswordAgain = event => {\n        this.setState({passwordAgain: event.target.value, passwordErrorMessage: \"\" });\n    }\n\n    handleLogin = async event => {\n        event.preventDefault();\n        \n        const account = {\n            _id: this.state.email.toLowerCase(),\n            password: this.state.password\n        };\n        await axios.post(`${BACK_SERVER_URL}/account/login`, account)\n            .then(response => {\n                if(response.status === 200) {\n                    this.props.onLogin(this.state.email);\n                    this.setState({isLoggedIn: true, showUI: false});\n                    console.log(response);\n                } else {\n                    this.setState({loginError: true});\n                }\n            })\n            .catch( error => {\n                this.setState({loginError: true});\n            });\n    }\n\n    handleCreate = async event => {\n        event.preventDefault();\n\n        if(this.state.email.length < 5) {\n            this.setState({emailErrorMessage: \"Email is invalid\"});\n        }\n        else if(this.state.password !== this.state.passwordAgain) {\n            this.setState({passwordErrorMessage: \"Passwords must match\"});\n        } \n        else if(this.state.password.length < 8) {\n            this.setState({passwordErrorMessage: \"Password must have at least 8 characters\"});\n        }\n        else if(!/^(?=.*[a-z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 lowercase character\"});\n        }\n        else if(!/^(?=.*[A-Z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 uppercase character\"});\n        }\n        else if(!/^(?=.*[0-9])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 numerical character\"});\n        }\n        else {\n            this.setState({emailErrorMessage: \"\"});\n            this.setState({passwordErrorMessage: \"\"});\n            \n            const account = {\n                _id: this.state.email.toLowerCase(),\n                password: this.state.password,\n                favorites: []\n            };\n            await axios.post(`${BACK_SERVER_URL}/account/signup`, account)\n                .then(response => {\n                    this.props.onLogin(this.state.email);\n                    this.setState({isLoggedIn: true, showUI: false});\n                    // this.props.history.push('/apod');\n                })\n                .catch( error => {\n                    this.setState({emailErrorMessage: \"Email is already in use\"});\n                });\n        }\n    }\n    \n\n    render() {\n\n        return (\n            <DocumentTitle title=\"Nasa Images\">\n                <div id=\"login-page\">\n                    {this.state.showUI ? \n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div id=\"login-container\" className=\"col-12\">\n                                    <div id=\"login-content\">\n                                        <h1>NASA Images</h1>\n                                        {this.state.showLogin ? \n                                            <div>\n                                                <h3>Login</h3>\n                                                <form onSubmit={this.handleLogin} >\n                                                    <div className=\"form-group\">\n                                                        <label>Email: </label>\n                                                        <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                    </div>\n                                                    <div className=\"form-group\">\n                                                        <label>Password: </label>\n                                                        <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                        {this.state.loginError ? <div className=\"text-danger\">Invalid email or password</div> : <div /> }\n                                                    </div>\n                                                    <button className=\"btn btn-primary\" type=\"submit\">Login</button>\n                                                </form>\n                                                <div id=\"login-links\" className=\"row\">\n                                                    <p className=\"col-6\">Forgot Password?</p>\n                                                    <p className=\"col-6\"onClick={this.handleToggle}>Sign Up</p>\n                                                </div>\n                                            </div> :\n                                            <div>\n                                                <h3>Create Account</h3>\n                                                <form onSubmit={this.handleCreate} >\n                                                    <div className=\"form-group\">\n                                                        <label>Email: </label>\n                                                        <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                        {this.state.emailErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.emailErrorMessage}</div> : <div /> }\n                                                    </div>\n                                                    \n                                                    <div className=\"form-group\">\n                                                        <label>Password: </label>\n                                                        <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                    </div>\n                                                    <div className=\"form-group\">\n                                                        <label>Re-enter Password: </label>\n                                                        <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePasswordAgain} value={this.state.passwordAgain}/>\n                                                        {this.state.passwordErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.passwordErrorMessage}</div> : <div /> }\n                                                    </div>\n                                                    <button className=\"btn btn-success\" type=\"submit\">Create</button>\n                                                </form>\n                                                <div id=\"login-links\" className=\"row\">\n                                                    <p onClick={this.handleToggle} className=\"col-12\">Already have an account? Log in</p>\n                                                </div>\n                                            </div>\n                                        }\n                                    </div>\n                                </div> \n                            </div>\n                        </div> :\n                        <div id=\"home-page\">\n                            <div className=\"container\">\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <h1>NASA IMAGES</h1>\n                                        {this.state.isLoggedIn ? \n                                            <div id=\"home-link-container\" className=\"row\">\n                                                \n                                                <NavLink className=\"col-6\" to={{\n                                                        pathname: '/apod',\n                                                        state: {\n                                                            email: this.state.email\n                                                        }\n                                                    }}>\n                                                    <h2 >\n                                                        APOD\n                                                    </h2>\n                                                </NavLink>\n\n                                                \n                                                <NavLink className=\"col-6\" to={{\n                                                    pathname: '/mars',\n                                                    state: {\n                                                        email: this.state.email\n                                                    }\n                                                }}>\n                                                    <h2>\n                                                        Mars\n                                                    </h2>\n                                                </NavLink>\n                                                \n                                            </div> :\n                                            <h2 onClick={this.toggleUI}>Login / Signup</h2> \n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            </DocumentTitle>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}