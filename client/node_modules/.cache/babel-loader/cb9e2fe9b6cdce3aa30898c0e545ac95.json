{"ast":null,"code":"import _regeneratorRuntime from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{NavLink}from'react-router-dom';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.toggleUI=function(){_this.setState({showUI:true});};_this.handleToggle=function(e){e.preventDefault();_this.setState({showLogin:!_this.state.showLogin,password:\"\",passwordAgain:\"\",email:\"\"});};_this.saveEmail=function(event){_this.setState({email:event.target.value,emailErrorMessage:\"\",loginError:false});};_this.savePassword=function(event){_this.setState({password:event.target.value,passwordErrorMessage:\"\",loginError:false});};_this.savePasswordAgain=function(event){_this.setState({passwordAgain:event.target.value,passwordErrorMessage:\"\"});};_this.handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var account;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();account={_id:_this.state.email.toLowerCase(),password:_this.state.password};_context.next=4;return axios.post('http://localhost:4000/account/login',account).then(function(response){_this.props.onLogin(_this.state.email);_this.setState({isLoggedIn:true,showUI:false});// this.props.history.push({\n//     pathname: '/',\n//     state: {\n//         email: this.state.email\n//     }\n// });\n}).catch(function(error){_this.setState({loginError:true});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleCreate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var account;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(_this.state.email.length<5)){_context2.next=5;break;}_this.setState({emailErrorMessage:\"Email is invalid\"});_context2.next=30;break;case 5:if(!(_this.state.password!==_this.state.passwordAgain)){_context2.next=9;break;}_this.setState({passwordErrorMessage:\"Passwords must match\"});_context2.next=30;break;case 9:if(!(_this.state.password.length<8)){_context2.next=13;break;}_this.setState({passwordErrorMessage:\"Password must have at least 8 characters\"});_context2.next=30;break;case 13:if(/^(?=.*[a-z])/.test(_this.state.password)){_context2.next=17;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 lowercase character\"});_context2.next=30;break;case 17:if(/^(?=.*[A-Z])/.test(_this.state.password)){_context2.next=21;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 uppercase character\"});_context2.next=30;break;case 21:if(/^(?=.*[0-9])/.test(_this.state.password)){_context2.next=25;break;}_this.setState({passwordErrorMessage:\"Password must contain 1 numerical character\"});_context2.next=30;break;case 25:_this.setState({emailErrorMessage:\"\"});_this.setState({passwordErrorMessage:\"\"});account={_id:_this.state.email.toLowerCase(),password:_this.state.password,favorites:[]};_context2.next=30;return axios.post('http://localhost:4000/account/signup',account).then(function(response){_this.props.onLogin(_this.state.email);_this.setState({isLoggedIn:true,showUI:false});// this.props.history.push('/apod');\n}).catch(function(error){_this.setState({emailErrorMessage:\"Email is already in use\"});});case 30:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.state={showLogin:true,password:\"\",passwordAgain:\"\",email:\"\",passwordErrorMessage:\"\",emailErrorMessage:\"\",loginError:false,showUI:false,isLoggedIn:props.location.state===undefined?false:true};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"login-page\"},this.state.showUI?/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-container\",className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-content\"},/*#__PURE__*/React.createElement(\"h1\",null,\"NASA Images\"),this.state.showLogin?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleLogin},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"johndoe@gmail.com\",onChange:this.saveEmail,value:this.state.email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePassword,value:this.state.password}),this.state.loginError?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},\"Invalid email or password\"):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\"},\"Login\")),/*#__PURE__*/React.createElement(\"div\",{id:\"login-links\",className:\"row\"},/*#__PURE__*/React.createElement(\"p\",{className:\"col-6\"},\"Forgot Password?\"),/*#__PURE__*/React.createElement(\"p\",{className:\"col-6\",onClick:this.handleToggle},\"Sign Up\"))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Create Account\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleCreate},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"johndoe@gmail.com\",onChange:this.saveEmail,value:this.state.email}),this.state.emailErrorMessage.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},this.state.emailErrorMessage):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePassword,value:this.state.password})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Re-enter Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"********\",onChange:this.savePasswordAgain,value:this.state.passwordAgain}),this.state.passwordErrorMessage.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\"},this.state.passwordErrorMessage):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",type:\"submit\"},\"Create\")),/*#__PURE__*/React.createElement(\"div\",{id:\"login-links\",className:\"row\"},/*#__PURE__*/React.createElement(\"p\",{onClick:this.handleToggle,className:\"col-12\"},\"Already have an account? Log in\"))))))):/*#__PURE__*/React.createElement(\"div\",{id:\"home-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h1\",null,\"NASA IMAGES\"),this.state.isLoggedIn?/*#__PURE__*/React.createElement(\"div\",{id:\"home-link-container\",className:\"row\"},/*#__PURE__*/React.createElement(NavLink,{className:\"col-6\",to:{pathname:'/apod',state:{email:this.state.email}}},/*#__PURE__*/React.createElement(\"h2\",null,\"APOD\")),/*#__PURE__*/React.createElement(NavLink,{className:\"col-6\",to:{pathname:'/mars',state:{email:this.state.email}}},/*#__PURE__*/React.createElement(\"h2\",null,\"Mars\"))):/*#__PURE__*/React.createElement(\"h2\",{onClick:this.toggleUI},\"Login / Signup\"))))));}}]);return Login;}(React.Component);export{Login as default};","map":{"version":3,"sources":["/Users/phillipyang/Desktop/Nasa-Images-v3/client/src/Login.js"],"names":["React","axios","NavLink","Login","props","toggleUI","setState","showUI","handleToggle","e","preventDefault","showLogin","state","password","passwordAgain","email","saveEmail","event","target","value","emailErrorMessage","loginError","savePassword","passwordErrorMessage","savePasswordAgain","handleLogin","account","_id","toLowerCase","post","then","response","onLogin","isLoggedIn","catch","error","handleCreate","length","test","favorites","location","undefined","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\n\n\n\nexport default class Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showLogin: true,\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\",\n            passwordErrorMessage: \"\",\n            emailErrorMessage: \"\",\n            loginError: false,\n            showUI: false,\n            isLoggedIn: props.location.state === undefined ? false : true\n        };\n    }\n    toggleUI = () => {\n        this.setState({showUI: true});\n    }\n    handleToggle = e => {\n        e.preventDefault();\n        this.setState({showLogin: !this.state.showLogin, password: \"\", passwordAgain: \"\", email: \"\" });\n    }\n    saveEmail = event => {\n        this.setState({email: event.target.value, emailErrorMessage: \"\", loginError: false});\n    }\n    savePassword = event => {\n        this.setState({password: event.target.value, passwordErrorMessage: \"\", loginError: false });\n    }\n    savePasswordAgain = event => {\n        this.setState({passwordAgain: event.target.value, passwordErrorMessage: \"\" });\n    }\n\n    handleLogin = async event => {\n        event.preventDefault();\n        \n        const account = {\n            _id: this.state.email.toLowerCase(),\n            password: this.state.password\n        };\n        await axios.post('http://localhost:4000/account/login', account)\n            .then(response => {\n                this.props.onLogin(this.state.email);\n                this.setState({isLoggedIn: true, showUI: false});\n                // this.props.history.push({\n                //     pathname: '/',\n                //     state: {\n                //         email: this.state.email\n                //     }\n                // });\n            })\n            .catch( error => {\n                this.setState({loginError: true});\n            });\n    }\n\n    handleCreate = async event => {\n        event.preventDefault();\n\n        if(this.state.email.length < 5) {\n            this.setState({emailErrorMessage: \"Email is invalid\"});\n        }\n        else if(this.state.password !== this.state.passwordAgain) {\n            this.setState({passwordErrorMessage: \"Passwords must match\"});\n        } \n        else if(this.state.password.length < 8) {\n            this.setState({passwordErrorMessage: \"Password must have at least 8 characters\"});\n        }\n        else if(!/^(?=.*[a-z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 lowercase character\"});\n        }\n        else if(!/^(?=.*[A-Z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 uppercase character\"});\n        }\n        else if(!/^(?=.*[0-9])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 numerical character\"});\n        }\n        else {\n            this.setState({emailErrorMessage: \"\"});\n            this.setState({passwordErrorMessage: \"\"});\n            \n            const account = {\n                _id: this.state.email.toLowerCase(),\n                password: this.state.password,\n                favorites: []\n            };\n            await axios.post('http://localhost:4000/account/signup', account)\n                .then(response => {\n                    this.props.onLogin(this.state.email);\n                    this.setState({isLoggedIn: true, showUI: false});\n                    // this.props.history.push('/apod');\n                })\n                .catch( error => {\n                    this.setState({emailErrorMessage: \"Email is already in use\"});\n                });\n        }\n    }\n    \n\n    render() {\n\n        return (\n            <div id=\"login-page\">\n                {this.state.showUI ? \n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div id=\"login-container\" className=\"col-12\">\n                                <div id=\"login-content\">\n                                    <h1>NASA Images</h1>\n                                    {this.state.showLogin ? \n                                        <div>\n                                            <h3>Login</h3>\n                                            <form onSubmit={this.handleLogin} >\n                                                <div className=\"form-group\">\n                                                    <label>Email: </label>\n                                                    <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                </div>\n                                                <div className=\"form-group\">\n                                                    <label>Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                    {this.state.loginError ? <div className=\"text-danger\">Invalid email or password</div> : <div /> }\n                                                </div>\n                                                <button className=\"btn btn-primary\" type=\"submit\">Login</button>\n                                            </form>\n                                            <div id=\"login-links\" className=\"row\">\n                                                <p className=\"col-6\">Forgot Password?</p>\n                                                <p className=\"col-6\"onClick={this.handleToggle}>Sign Up</p>\n                                            </div>\n                                        </div> :\n                                        <div>\n                                            <h3>Create Account</h3>\n                                            <form onSubmit={this.handleCreate} >\n                                                <div className=\"form-group\">\n                                                    <label>Email: </label>\n                                                    <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                    {this.state.emailErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.emailErrorMessage}</div> : <div /> }\n                                                </div>\n                                                \n                                                <div className=\"form-group\">\n                                                    <label>Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                </div>\n                                                <div className=\"form-group\">\n                                                    <label>Re-enter Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePasswordAgain} value={this.state.passwordAgain}/>\n                                                    {this.state.passwordErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.passwordErrorMessage}</div> : <div /> }\n                                                </div>\n                                                <button className=\"btn btn-success\" type=\"submit\">Create</button>\n                                            </form>\n                                            <div id=\"login-links\" className=\"row\">\n                                                <p onClick={this.handleToggle} className=\"col-12\">Already have an account? Log in</p>\n                                            </div>\n                                        </div>\n                                    }\n                                </div>\n                            </div> \n                        </div>\n                    </div> :\n                    <div id=\"home-page\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-12\">\n                                    <h1>NASA IMAGES</h1>\n                                    {this.state.isLoggedIn ? \n                                        <div id=\"home-link-container\" className=\"row\">\n                                            \n                                            <NavLink className=\"col-6\" to={{\n                                                    pathname: '/apod',\n                                                    state: {\n                                                        email: this.state.email\n                                                    }\n                                                }}>\n                                                <h2 >\n                                                    APOD\n                                                </h2>\n                                            </NavLink>\n\n                                            \n                                            <NavLink className=\"col-6\" to={{\n                                                pathname: '/mars',\n                                                state: {\n                                                    email: this.state.email\n                                                }\n                                            }}>\n                                                <h2>\n                                                    Mars\n                                                </h2>\n                                            </NavLink>\n                                            \n                                        </div> :\n                                        <h2 onClick={this.toggleUI}>Login / Signup</h2> \n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                }\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}