{"ast":null,"code":"import _regeneratorRuntime from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{fetchRover,fetchMarsFavorites}from\"./NasaAPIs\";import{NavLink}from\"react-router-dom\";import ErrorPage from\"./ErrorPage\";import Loading from\"./Loading\";import{formatDisplayDate}from\"./Formatting\";import DocumentTitle from\"react-document-title\";import{addPhotoNotification,removePhotoNotification}from\"./Notifications\";import axios from'axios';var API=\"https://itp404-final-project-yangphil.herokuapp.com/api/favorites\";var SingleMarsImage=/*#__PURE__*/function(_React$Component){_inherits(SingleMarsImage,_React$Component);var _super=_createSuper(SingleMarsImage);function SingleMarsImage(props){var _this;_classCallCheck(this,SingleMarsImage);_this=_super.call(this,props);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var firstSplit,id,secondSplit,earthDate,photos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(_this.props);_this.setState({loading:true});_context.prev=2;// date and photo id are passed in via url they need to be extracted\nfirstSplit=_this.props.match.params.info.split(\"=\");id=firstSplit[2];// extract the id\nsecondSplit=firstSplit[1].split(\"&\");earthDate=secondSplit[0];// after extracting the date, I can use it to grab the JSON for that date\n_context.next=9;return fetchRover(earthDate);case 9:photos=_context.sent;_this.setState({photos:photos});_this.state.photos.map(function(photo){// check if that ID exists incase the user plays w/ the url\nif(String(photo.id)===id){_this.setState({idExists:true,photo:photo});_this.checkIfLiked();}return 0;});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);// this.setState({ loadingError: true });\n_this.props.history.push({pathname:\"/mars\",state:{email:_this.props.location.state.email}});case 17:_this.setState({loading:false});case 18:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));_this.checkIfLiked=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var urlComponents,id,acc,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:urlComponents=_this.state.photo.img_src.split(\"/\");id=urlComponents[urlComponents.length-1];acc={_id:_this.props.location.state.email,data:{_id:id}};_context2.next=5;return axios.post(\"http://localhost:4000/account/favorites/mars/fetch\",acc);case 5:res=_context2.sent;console.log(res);if(res.status!==200){_this.setState({liked:false});}else{_this.setState({liked:true});}case 8:case\"end\":return _context2.stop();}}},_callee2);}));_this.toggleLike=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var urlComponents,id,newFav;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:urlComponents=_this.state.photo.img_src.split(\"/\");id=urlComponents[urlComponents.length-1];if(!_this.state.liked){newFav={_id:_this.props.location.state.email,data:{_id:id,url:_this.state.photo.img_src,date:_this.state.photo.earth_date,comment:\"\",api:\"mars\",array_id:_this.state.photo.id}};axios.put('http://localhost:4000/account/favorites/mars/add',newFav).then(function(response){console.log(response);}).catch(function(err){console.log(err);});addPhotoNotification(id);}else if(_this.state.liked){axios.delete('http://localhost:4000/account/favorites/mars/delete',{// for delete, all data must be wrapped in data\ndata:{_id:_this.props.location.state.email,data:{_id:id}}}).then(function(response){console.log(response);}).catch(function(err){console.log(\"didn't delete\");});removePhotoNotification(id);}_this.setState({liked:!_this.state.liked});case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.lastTap=null;_this.handleDoubleTap=function(){var now=Date.now();var DOUBLE_PRESS_DELAY=300;if(_this.lastTap&&now-_this.lastTap<DOUBLE_PRESS_DELAY){_this.toggleLike();}else{_this.lastTap=now;}};_this.state={photos:[],idExists:false,loading:false,photo:{},liked:false// loadingError: false\n};return _this;}_createClass(SingleMarsImage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(DocumentTitle,{title:\"Mars Image Details\"},/*#__PURE__*/React.createElement(\"div\",{id:\"singlePhotoPage\",onClick:this.props.onClick},this.state.loading?/*#__PURE__*/React.createElement(Loading,null):/*#__PURE__*/React.createElement(\"div\",null,this.state.photos.length===0||!this.state.idExists?/*#__PURE__*/React.createElement(ErrorPage,{url:this.props.location.pathname}):/*#__PURE__*/React.createElement(\"div\",{key:this.state.photo.id,className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(NavLink,{to:{pathname:\"/mars\",state:{email:this.props.location.state.email,earth_date:this.state.photo.earth_date}}},/*#__PURE__*/React.createElement(\"a\",{id:\"back-button\",className:\"btn col-12\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon-circle-arrow-left\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-7 col-md-7 col-sm-12 single-photo\"},/*#__PURE__*/React.createElement(\"img\",{className:\"col-12\",onClick:this.handleDoubleTap,src:this.state.photo.img_src,alt:this.state.photo.camera?this.state.photo.camera.full_name:\"mars image\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-5 col-md-5 col-sm-12 single-photo-details\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Details\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Date Taken: \"),formatDisplayDate(this.state.photo.earth_date)),this.state.photo.rover?/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Rover: \"),this.state.photo.rover.name):/*#__PURE__*/React.createElement(\"p\",null),this.state.photo.camera?/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Camera: \"),this.state.photo.camera.full_name):/*#__PURE__*/React.createElement(\"p\",null),this.state.photo.rover?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Launch Date: \"),formatDisplayDate(this.state.photo.rover.launch_date)),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Landing Date: \"),formatDisplayDate(this.state.photo.rover.landing_date)),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Status: \"),this.state.photo.rover.status)):/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"p\",{className:\"icon-holder\",onClick:this.toggleLike},/*#__PURE__*/React.createElement(\"img\",{src:this.state.liked?require(\"./images/filledHeart.png\"):require(\"./images/emptyHeart.png\"),className:\"heart-icon\",alt:\"heart icon\"}))))))));}}]);return SingleMarsImage;}(React.Component);export{SingleMarsImage as default};","map":{"version":3,"sources":["/Users/phillipyang/Desktop/Nasa-Images-v3/client/src/SingleMarsImage.js"],"names":["React","fetchRover","fetchMarsFavorites","NavLink","ErrorPage","Loading","formatDisplayDate","DocumentTitle","addPhotoNotification","removePhotoNotification","axios","API","SingleMarsImage","props","componentDidMount","console","log","setState","loading","firstSplit","match","params","info","split","id","secondSplit","earthDate","photos","state","map","photo","String","idExists","checkIfLiked","history","push","pathname","email","location","urlComponents","img_src","length","acc","_id","data","post","res","status","liked","toggleLike","newFav","url","date","earth_date","comment","api","array_id","put","then","response","catch","err","delete","lastTap","handleDoubleTap","now","Date","DOUBLE_PRESS_DELAY","onClick","camera","full_name","rover","name","launch_date","landing_date","require","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { fetchRover, fetchMarsFavorites } from \"./NasaAPIs\";\nimport { NavLink } from \"react-router-dom\";\nimport ErrorPage from \"./ErrorPage\";\nimport Loading from \"./Loading\";\nimport { formatDisplayDate } from \"./Formatting\";\nimport DocumentTitle from \"react-document-title\";\nimport { addPhotoNotification, removePhotoNotification } from \"./Notifications\";\nimport axios from 'axios';\nconst API = \"https://itp404-final-project-yangphil.herokuapp.com/api/favorites\";\n\n\nexport default class SingleMarsImage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      photos: [],\n      idExists: false,\n      loading: false,\n      photo: {},\n      liked: false\n      // loadingError: false\n    };\n  }\n  componentDidMount = async () => {\n    console.log(this.props);\n    this.setState({ loading: true });\n    try {\n      // date and photo id are passed in via url they need to be extracted\n      var firstSplit = this.props.match.params.info.split(\"=\");\n      const id = firstSplit[2]; // extract the id\n      var secondSplit = firstSplit[1].split(\"&\");\n      const earthDate = secondSplit[0];\n      // after extracting the date, I can use it to grab the JSON for that date\n      const photos = await fetchRover(earthDate);\n      this.setState({ photos });\n      this.state.photos.map(photo => {\n        // check if that ID exists incase the user plays w/ the url\n        if (String(photo.id) === id) {\n          this.setState({ idExists: true, photo });\n          this.checkIfLiked();\n        }\n        return 0;\n      });\n    } catch {\n      // this.setState({ loadingError: true });\n      this.props.history.push({\n        pathname: \"/mars\",\n        state: {\n          email: this.props.location.state.email\n        }\n      })\n    }\n    this.setState({ loading: false });\n  };\n  checkIfLiked = async () => {\n\n    const urlComponents = this.state.photo.img_src.split(\"/\");\n    const id = urlComponents[urlComponents.length - 1];\n\t\t\n\t\tconst acc = {\n\t\t\t_id: this.props.location.state.email,\n\t\t\tdata: {\n\t\t\t\t_id: id\n\t\t\t}\n\t\t}\n\t\tlet res = await axios.post(`http://localhost:4000/account/favorites/mars/fetch`, acc);\n\t\tconsole.log(res);\n\t\tif(res.status !== 200) {\n\t\t\tthis.setState({ liked: false });\n\t\t} else {\n\t\t\tthis.setState({ liked: true });\n\t\t}\n    \n  };\n  toggleLike = async () => {\n    const urlComponents = this.state.photo.img_src.split(\"/\");\n    const id = urlComponents[urlComponents.length - 1];\n    if(!this.state.liked){\n\t\t\tconst newFav = {\n        _id: this.props.location.state.email,\n        data: {\n\t\t\t\t\t_id: id,\n\t\t\t\t\turl: this.state.photo.img_src,\n\t\t\t\t\tdate: this.state.photo.earth_date,\n\t\t\t\t\tcomment: \"\",\n          api: \"mars\",\n          array_id: this.state.photo.id\n\t\t\t\t}\n\t\t\t};\n\t\t\taxios.put('http://localhost:4000/account/favorites/mars/add', newFav)\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t});\n\t\t\taddPhotoNotification(id);\n\t\t}\n\t\telse if(this.state.liked){\n\t\t\taxios.delete('http://localhost:4000/account/favorites/mars/delete', {\n\t\t\t\t// for delete, all data must be wrapped in data\n        data: {\n\t\t\t\t\t_id: this.props.location.state.email,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t_id: id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(\"didn't delete\");\n\t\t\t});\n\t\t\tremovePhotoNotification(id);\n\t\t}\n\t\tthis.setState({ liked: !this.state.liked });\n\n  };\n  lastTap = null;\n  handleDoubleTap = () => {\n    const now = Date.now();\n    const DOUBLE_PRESS_DELAY = 300;\n    if (this.lastTap && now - this.lastTap < DOUBLE_PRESS_DELAY) {\n      this.toggleLike();\n    } else {\n      this.lastTap = now;\n    }\n  };\n  render() {\n    return (\n      <DocumentTitle title=\"Mars Image Details\">\n        <div id=\"singlePhotoPage\"  onClick={this.props.onClick}>\n          {this.state.loading ? (\n            <Loading />\n          ) : (\n            <div>\n              {this.state.photos.length === 0 || !this.state.idExists ? (\n                <ErrorPage url={this.props.location.pathname} />\n              ) : (\n                <div key={this.state.photo.id} className=\"container\">\n                  <div className=\"row\">\n                    <NavLink\n                      to={{\n                        pathname: \"/mars\",\n                        state: {\n                          email: this.props.location.state.email,\n                          earth_date: this.state.photo.earth_date\n                        }\n                      }}\n                    >\n                       <a id=\"back-button\" className=\"btn col-12\"><i className=\"icon-circle-arrow-left\"></i></a>\n                    </NavLink>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"col-lg-7 col-md-7 col-sm-12 single-photo\">\n                      <img\n                        className=\"col-12\"\n                        onClick={this.handleDoubleTap}\n                        src={this.state.photo.img_src}\n                        alt={this.state.photo.camera ? this.state.photo.camera.full_name : \"mars image\"}\n                      />\n                    </div>\n                    <div className=\"col-lg-5 col-md-5 col-sm-12 single-photo-details\">\n                      <h2>Details</h2>\n                      <p>\n                        <strong>Date Taken: </strong>\n                        {formatDisplayDate(this.state.photo.earth_date)}\n                      </p>\n                      {this.state.photo.rover ? \n                        <p>\n                          <strong>Rover: </strong>\n                          {this.state.photo.rover.name }\n                        </p> : <p/> \n                      }\n                      {this.state.photo.camera ?\n                        <p>\n                          <strong>Camera: </strong>\n                          {this.state.photo.camera.full_name}\n                        </p> : <p/>\n                      }\n                      {this.state.photo.rover ? \n                        <div>\n                          <p>\n                            <strong>Launch Date: </strong>\n                            {formatDisplayDate(this.state.photo.rover.launch_date)}\n                          </p> \n                          <p>\n                            <strong>Landing Date: </strong>\n                            {formatDisplayDate(this.state.photo.rover.landing_date)}\n                          </p>\n                          <p>\n                            <strong>Status: </strong>\n                            {this.state.photo.rover.status}\n                          </p>\n                        </div> : <div/>\n                      }\n                      <p className=\"icon-holder\" onClick={this.toggleLike}>\n                        <img\n                          src={\n                            this.state.liked\n                              ? require(\"./images/filledHeart.png\")\n                              : require(\"./images/emptyHeart.png\")\n                          }\n                          className=\"heart-icon\"\n                          alt=\"heart icon\"\n                        />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </DocumentTitle>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}