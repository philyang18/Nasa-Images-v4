{"ast":null,"code":"var _jsxFileName = \"/Users/phillipyang/Desktop/Nasa-Images-v3/client/src/Login.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleUI = () => {\n      this.setState({\n        showUI: true\n      });\n    };\n\n    this.handleToggle = e => {\n      e.preventDefault();\n      this.setState({\n        showLogin: !this.state.showLogin,\n        password: \"\",\n        passwordAgain: \"\",\n        email: \"\"\n      });\n    };\n\n    this.saveEmail = event => {\n      this.setState({\n        email: event.target.value,\n        emailErrorMessage: \"\",\n        loginError: false\n      });\n    };\n\n    this.savePassword = event => {\n      this.setState({\n        password: event.target.value,\n        passwordErrorMessage: \"\",\n        loginError: false\n      });\n    };\n\n    this.savePasswordAgain = event => {\n      this.setState({\n        passwordAgain: event.target.value,\n        passwordErrorMessage: \"\"\n      });\n    };\n\n    this.handleLogin = async event => {\n      event.preventDefault();\n      const account = {\n        _id: this.state.email.toLowerCase(),\n        password: this.state.password\n      };\n      await axios.post('http://localhost:4000/account/login', account).then(response => {\n        this.props.onLogin(this.state.email);\n        this.setState({\n          isLoggedIn: true,\n          showUI: false\n        }); // this.props.history.push({\n        //     pathname: '/',\n        //     state: {\n        //         email: this.state.email\n        //     }\n        // });\n      }).catch(error => {\n        this.setState({\n          loginError: true\n        });\n      });\n    };\n\n    this.handleCreate = async event => {\n      event.preventDefault();\n\n      if (this.state.email.length < 5) {\n        this.setState({\n          emailErrorMessage: \"Email is invalid\"\n        });\n      } else if (this.state.password !== this.state.passwordAgain) {\n        this.setState({\n          passwordErrorMessage: \"Passwords must match\"\n        });\n      } else if (this.state.password.length < 8) {\n        this.setState({\n          passwordErrorMessage: \"Password must have at least 8 characters\"\n        });\n      } else if (!/^(?=.*[a-z])/.test(this.state.password)) {\n        this.setState({\n          passwordErrorMessage: \"Password must contain 1 lowercase character\"\n        });\n      } else if (!/^(?=.*[A-Z])/.test(this.state.password)) {\n        this.setState({\n          passwordErrorMessage: \"Password must contain 1 uppercase character\"\n        });\n      } else if (!/^(?=.*[0-9])/.test(this.state.password)) {\n        this.setState({\n          passwordErrorMessage: \"Password must contain 1 numerical character\"\n        });\n      } else {\n        this.setState({\n          emailErrorMessage: \"\"\n        });\n        this.setState({\n          passwordErrorMessage: \"\"\n        });\n        const account = {\n          _id: this.state.email.toLowerCase(),\n          password: this.state.password,\n          favorites: []\n        };\n        await axios.post('http://localhost:4000/account/signup', account).then(response => {\n          this.props.onLogin(this.state.email);\n          this.setState({\n            isLoggedIn: true,\n            showUI: false\n          }); // this.props.history.push('/apod');\n        }).catch(error => {\n          this.setState({\n            emailErrorMessage: \"Email is already in use\"\n          });\n        });\n      }\n    };\n\n    this.state = {\n      showLogin: true,\n      password: \"\",\n      passwordAgain: \"\",\n      email: \"\",\n      passwordErrorMessage: \"\",\n      emailErrorMessage: \"\",\n      loginError: false,\n      showUI: false,\n      isLoggedIn: props.location.state === undefined ? false : true\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"login-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.state.showUI ? React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"login-container\",\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"login-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"NASA Images\"), this.state.showLogin ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      onSubmit: this.handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      placeholder: \"johndoe@gmail.com\",\n      onChange: this.saveEmail,\n      value: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"********\",\n      onChange: this.savePassword,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), this.state.loginError ? React.createElement(\"div\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Invalid email or password\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Login\")), React.createElement(\"div\", {\n      id: \"login-links\",\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"col-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Forgot Password?\"), React.createElement(\"p\", {\n      className: \"col-6\",\n      onClick: this.handleToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Sign Up\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Create Account\"), React.createElement(\"form\", {\n      onSubmit: this.handleCreate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      placeholder: \"johndoe@gmail.com\",\n      onChange: this.saveEmail,\n      value: this.state.email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), this.state.emailErrorMessage.length > 0 ? React.createElement(\"div\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, this.state.emailErrorMessage) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"********\",\n      onChange: this.savePassword,\n      value: this.state.password,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Re-enter Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"********\",\n      onChange: this.savePasswordAgain,\n      value: this.state.passwordAgain,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), this.state.passwordErrorMessage.length > 0 ? React.createElement(\"div\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.passwordErrorMessage) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Create\")), React.createElement(\"div\", {\n      id: \"login-links\",\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      onClick: this.handleToggle,\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Already have an account? Log in\"))))))) : React.createElement(\"div\", {\n      id: \"home-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"NASA IMAGES\"), this.state.isLoggedIn ? React.createElement(\"div\", {\n      id: \"home-link-container\",\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      className: \"col-6\",\n      to: {\n        pathname: '/apod',\n        state: {\n          email: this.state.email\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"APOD\")), React.createElement(NavLink, {\n      className: \"col-6\",\n      to: {\n        pathname: '/mars',\n        state: {\n          email: this.state.email\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Mars\"))) : React.createElement(\"h2\", {\n      onClick: this.toggleUI,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Login / Signup\"))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/phillipyang/Desktop/Nasa-Images-v3/client/src/Login.js"],"names":["React","axios","NavLink","Login","Component","constructor","props","toggleUI","setState","showUI","handleToggle","e","preventDefault","showLogin","state","password","passwordAgain","email","saveEmail","event","target","value","emailErrorMessage","loginError","savePassword","passwordErrorMessage","savePasswordAgain","handleLogin","account","_id","toLowerCase","post","then","response","onLogin","isLoggedIn","catch","error","handleCreate","length","test","favorites","location","undefined","render","pathname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\n\n\n\nexport default class Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showLogin: true,\n            password: \"\",\n            passwordAgain: \"\",\n            email: \"\",\n            passwordErrorMessage: \"\",\n            emailErrorMessage: \"\",\n            loginError: false,\n            showUI: false,\n            isLoggedIn: props.location.state === undefined ? false : true\n        };\n    }\n    toggleUI = () => {\n        this.setState({showUI: true});\n    }\n    handleToggle = e => {\n        e.preventDefault();\n        this.setState({showLogin: !this.state.showLogin, password: \"\", passwordAgain: \"\", email: \"\" });\n    }\n    saveEmail = event => {\n        this.setState({email: event.target.value, emailErrorMessage: \"\", loginError: false});\n    }\n    savePassword = event => {\n        this.setState({password: event.target.value, passwordErrorMessage: \"\", loginError: false });\n    }\n    savePasswordAgain = event => {\n        this.setState({passwordAgain: event.target.value, passwordErrorMessage: \"\" });\n    }\n\n    handleLogin = async event => {\n        event.preventDefault();\n        \n        const account = {\n            _id: this.state.email.toLowerCase(),\n            password: this.state.password\n        };\n        await axios.post('http://localhost:4000/account/login', account)\n            .then(response => {\n                this.props.onLogin(this.state.email);\n                this.setState({isLoggedIn: true, showUI: false});\n                // this.props.history.push({\n                //     pathname: '/',\n                //     state: {\n                //         email: this.state.email\n                //     }\n                // });\n            })\n            .catch( error => {\n                this.setState({loginError: true});\n            });\n    }\n\n    handleCreate = async event => {\n        event.preventDefault();\n\n        if(this.state.email.length < 5) {\n            this.setState({emailErrorMessage: \"Email is invalid\"});\n        }\n        else if(this.state.password !== this.state.passwordAgain) {\n            this.setState({passwordErrorMessage: \"Passwords must match\"});\n        } \n        else if(this.state.password.length < 8) {\n            this.setState({passwordErrorMessage: \"Password must have at least 8 characters\"});\n        }\n        else if(!/^(?=.*[a-z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 lowercase character\"});\n        }\n        else if(!/^(?=.*[A-Z])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 uppercase character\"});\n        }\n        else if(!/^(?=.*[0-9])/.test(this.state.password)) {\n            this.setState({passwordErrorMessage: \"Password must contain 1 numerical character\"});\n        }\n        else {\n            this.setState({emailErrorMessage: \"\"});\n            this.setState({passwordErrorMessage: \"\"});\n            \n            const account = {\n                _id: this.state.email.toLowerCase(),\n                password: this.state.password,\n                favorites: []\n            };\n            await axios.post('http://localhost:4000/account/signup', account)\n                .then(response => {\n                    this.props.onLogin(this.state.email);\n                    this.setState({isLoggedIn: true, showUI: false});\n                    // this.props.history.push('/apod');\n                })\n                .catch( error => {\n                    this.setState({emailErrorMessage: \"Email is already in use\"});\n                });\n        }\n    }\n    \n\n    render() {\n\n        return (\n            <div id=\"login-page\">\n                {this.state.showUI ? \n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div id=\"login-container\" className=\"col-12\">\n                                <div id=\"login-content\">\n                                    <h1>NASA Images</h1>\n                                    {this.state.showLogin ? \n                                        <div>\n                                            <h3>Login</h3>\n                                            <form onSubmit={this.handleLogin} >\n                                                <div className=\"form-group\">\n                                                    <label>Email: </label>\n                                                    <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                </div>\n                                                <div className=\"form-group\">\n                                                    <label>Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                    {this.state.loginError ? <div className=\"text-danger\">Invalid email or password</div> : <div /> }\n                                                </div>\n                                                <button className=\"btn btn-primary\" type=\"submit\">Login</button>\n                                            </form>\n                                            <div id=\"login-links\" className=\"row\">\n                                                <p className=\"col-6\">Forgot Password?</p>\n                                                <p className=\"col-6\"onClick={this.handleToggle}>Sign Up</p>\n                                            </div>\n                                        </div> :\n                                        <div>\n                                            <h3>Create Account</h3>\n                                            <form onSubmit={this.handleCreate} >\n                                                <div className=\"form-group\">\n                                                    <label>Email: </label>\n                                                    <input type=\"email\" className=\"form-control\" placeholder=\"johndoe@gmail.com\" onChange={this.saveEmail} value={this.state.email}/>\n                                                    {this.state.emailErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.emailErrorMessage}</div> : <div /> }\n                                                </div>\n                                                \n                                                <div className=\"form-group\">\n                                                    <label>Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePassword} value={this.state.password}/>\n                                                </div>\n                                                <div className=\"form-group\">\n                                                    <label>Re-enter Password: </label>\n                                                    <input type=\"password\" className=\"form-control\" placeholder=\"********\" onChange={this.savePasswordAgain} value={this.state.passwordAgain}/>\n                                                    {this.state.passwordErrorMessage.length > 0 ? <div className=\"text-danger\">{this.state.passwordErrorMessage}</div> : <div /> }\n                                                </div>\n                                                <button className=\"btn btn-success\" type=\"submit\">Create</button>\n                                            </form>\n                                            <div id=\"login-links\" className=\"row\">\n                                                <p onClick={this.handleToggle} className=\"col-12\">Already have an account? Log in</p>\n                                            </div>\n                                        </div>\n                                    }\n                                </div>\n                            </div> \n                        </div>\n                    </div> :\n                    <div id=\"home-page\">\n                        <div className=\"container\">\n                            <div className=\"row\">\n                                <div className=\"col-12\">\n                                    <h1>NASA IMAGES</h1>\n                                    {this.state.isLoggedIn ? \n                                        <div id=\"home-link-container\" className=\"row\">\n                                            \n                                            <NavLink className=\"col-6\" to={{\n                                                    pathname: '/apod',\n                                                    state: {\n                                                        email: this.state.email\n                                                    }\n                                                }}>\n                                                <h2 >\n                                                    APOD\n                                                </h2>\n                                            </NavLink>\n\n                                            \n                                            <NavLink className=\"col-6\" to={{\n                                                pathname: '/mars',\n                                                state: {\n                                                    email: this.state.email\n                                                }\n                                            }}>\n                                                <h2>\n                                                    Mars\n                                                </h2>\n                                            </NavLink>\n                                            \n                                        </div> :\n                                        <h2 onClick={this.toggleUI}>Login / Signup</h2> \n                                    }\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                }\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}