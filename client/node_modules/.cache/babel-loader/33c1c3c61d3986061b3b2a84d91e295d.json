{"ast":null,"code":"import _classCallCheck from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/phillipyang/Desktop/Nasa-Images-v3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import PropTypes from\"prop-types\";var ENTER_KEY=13;var ESCAPE_KEY=27;var CommentBox=/*#__PURE__*/function(_React$Component){_inherits(CommentBox,_React$Component);function CommentBox(props){var _this;_classCallCheck(this,CommentBox);_this=_possibleConstructorReturn(this,_getPrototypeOf(CommentBox).call(this,props));_this.componentDidMount=function(){if(_this.props.value===\"\"||!_this.props.value||_this.props.value===\"\\n\"){_this.setState({default:true});}};_this.enableEditMode=function(){_this.setState({editMode:true});};_this.handleChange=function(event){_this.setState({currentValue:event.target.value});if(event.target.value.length<=150){_this.setState({showSaveError:false});}};_this.handleKeyUp=function(event){console.log(event);var keyCode=event.keyCode;var currentValue=_this.state.currentValue;if(keyCode===ENTER_KEY&&!event.shiftKey||keyCode===ESCAPE_KEY){_this.setState({editMode:false});}if(keyCode===ENTER_KEY&&!event.shiftKey){if(!currentValue.trim()){_this.setState({default:true,currentValue:\"\"});}else{_this.setState({default:false});}_this.props.onEnter(currentValue);}else if(keyCode===ESCAPE_KEY){_this.setState({currentValue:_this.props.value});}};_this.handleInvalidKeyUp=function(event){var keyCode=event.keyCode;if(keyCode===ESCAPE_KEY){_this.setState({editMode:false,currentValue:_this.props.value});}if(keyCode===ENTER_KEY){window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});_this.setState({showSaveError:true});}};_this.handleKeyDown=function(event){var keyCode=event.keyCode;if(keyCode===ENTER_KEY&&!event.shiftKey){event.preventDefault();}};_this.state={currentValue:props.value,editMode:false,defaultText:\"Click to add a comment\",default:false,showSaveError:false};return _this;}_createClass(CommentBox,[{key:\"render\",value:function render(){if(this.state.editMode){return React.createElement(\"div\",null,React.createElement(\"textarea\",{\"data-testid\":\"comment-input\",id:\"comment-box-input\",value:this.state.currentValue,onKeyUp:this.state.currentValue.length<=150?this.handleKeyUp:this.handleInvalidKeyUp,onKeyDown:this.handleKeyDown,onChange:this.handleChange,rows:\"5\",autofocus:true}),React.createElement(RemainingCharacters,{max:150,text:this.state.currentValue},function(remainingCharacters){return React.createElement(\"p\",{className:remainingCharacters<0?\"text-danger\":undefined},remainingCharacters,\" characters left\");}),this.state.showSaveError?React.createElement(\"div\",{\"data-testid\":\"form-validation\",className:\"text-danger\"},\"Cannot save!\"):React.createElement(\"div\",null));}else{return React.createElement(\"p\",{\"data-testid\":\"comment-text\",id:\"comment-box\",className:\"col-lg-6 col-md-6 col-sm-12\",onClick:this.enableEditMode},this.state.default?this.state.defaultText:this.props.value);}}}]);return CommentBox;}(React.Component);export{CommentBox as default};function RemainingCharacters(props){var max=props.max,text=props.text,children=props.children;var remaining=max-text.length;if(typeof children===\"function\"){return children(remaining);}else{return React.createElement(React.Fragment,null,remaining,\" characters left\");}}RemainingCharacters.propTypes={text:PropTypes.string.isRequired,max:PropTypes.number.isRequired};","map":{"version":3,"sources":["/Users/phillipyang/Desktop/Nasa-Images-v3/client/src/CommentBox.js"],"names":["React","PropTypes","ENTER_KEY","ESCAPE_KEY","CommentBox","props","componentDidMount","value","setState","default","enableEditMode","editMode","handleChange","event","currentValue","target","length","showSaveError","handleKeyUp","console","log","keyCode","state","shiftKey","trim","onEnter","handleInvalidKeyUp","window","scrollTo","top","document","body","scrollHeight","behavior","handleKeyDown","preventDefault","defaultText","remainingCharacters","undefined","Component","RemainingCharacters","max","text","children","remaining","propTypes","string","isRequired","number"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst ENTER_KEY = 13;\nconst ESCAPE_KEY = 27;\n\nexport default class CommentBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentValue: props.value,\n      editMode: false,\n      defaultText: \"Click to add a comment\",\n      default: false,\n      showSaveError: false\n    };\n  }\n  componentDidMount = () => {\n    if (\n      this.props.value === \"\" ||\n      !this.props.value ||\n      this.props.value === \"\\n\"\n    ) {\n      this.setState({ default: true });\n    }\n  };\n  enableEditMode = () => {\n    this.setState({\n      editMode: true\n    });\n  };\n  handleChange = event => {\n    this.setState({\n      currentValue: event.target.value\n    });\n    if (event.target.value.length <= 150) {\n      this.setState({\n        showSaveError: false\n      });\n    }\n  };\n  handleKeyUp = event => {\n    console.log(event);\n    const { keyCode } = event;\n    const { currentValue } = this.state;\n    if ((keyCode === ENTER_KEY && !event.shiftKey)|| keyCode === ESCAPE_KEY) {\n      this.setState({ editMode: false });\n    }\n\n    if (keyCode === ENTER_KEY && !event.shiftKey) {\n      if (!currentValue.trim()) {\n        this.setState({ default: true, currentValue: \"\" });\n      } else {\n        this.setState({ default: false });\n      }\n      this.props.onEnter(currentValue);\n    } else if (keyCode === ESCAPE_KEY) {\n      this.setState({\n        currentValue: this.props.value\n      });\n    }\n  };\n  handleInvalidKeyUp = event => {\n    const { keyCode } = event;\n    if (keyCode === ESCAPE_KEY) {\n      this.setState({ editMode: false, currentValue: this.props.value });\n\n    }\n    if (keyCode === ENTER_KEY) {\n      window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth' });\n      \n      this.setState({ showSaveError: true });\n    }\n  };\n  // removes a newline when hitting enter\n  handleKeyDown = event => {\n    const { keyCode } = event;\n    if (keyCode === ENTER_KEY && !event.shiftKey) {\n      event.preventDefault();\n    }\n  };\n\n  render() {\n    if (this.state.editMode) {\n      return (\n        <div>\n          <textarea\n            data-testid=\"comment-input\"\n            id=\"comment-box-input\"\n            value={this.state.currentValue}\n            onKeyUp={ this.state.currentValue.length <= 150 ? this.handleKeyUp : this.handleInvalidKeyUp }\n            onKeyDown={this.handleKeyDown}\n            onChange={this.handleChange}\n            rows=\"5\"\n            autofocus\n          />\n          <RemainingCharacters max={150} text={this.state.currentValue}>\n            {remainingCharacters => {\n              return (\n                <p className={remainingCharacters < 0 ? \"text-danger\" : undefined}>\n                  {remainingCharacters} characters left\n                </p>\n              );\n            }}\n          </RemainingCharacters>\n          {this.state.showSaveError ? <div data-testid=\"form-validation\" className=\"text-danger\">Cannot save!</div> : <div /> }\n        </div>\n      );\n    }\n    else {\n      return (\n        <p\n          data-testid=\"comment-text\"\n          id=\"comment-box\"\n          className=\"col-lg-6 col-md-6 col-sm-12\"\n          onClick={this.enableEditMode}\n        >\n          {this.state.default ? this.state.defaultText : this.props.value}\n        </p>\n      );\n    }\n  }\n}\n\nCommentBox.propTypes = {\n  value: PropTypes.string.isRequired,\n  onEnter: PropTypes.func.isRequired\n};\n\nfunction RemainingCharacters(props) {\n  const { max, text, children } = props;\n  const remaining = max - text.length;\n\n  if (typeof children === \"function\") {\n    return children(remaining);\n  } else {\n    return <>{remaining} characters left</>;\n  }\n}\n\nRemainingCharacters.propTypes = {\n  text: PropTypes.string.isRequired,\n  max: PropTypes.number.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}